{"improved-copper-finch":{"name":"test","id":"improved-copper-finch","content":"wsPrint(\"the only difference between a grape and my wife is...\")","variables":[]},"bad-apricot-swift":{"name":"sw","id":"bad-apricot-swift","content":"import websocket\r\nimport os\r\nimport json, base64\r\n# Define the websocket URL\r\nurl = \"ws://localhost:25565\"\r\n\r\n\r\nheaders = {\r\n    \"device-name\" : \"Ishaan_PC\"\r\n}\r\n\r\n# Define the function to be executed when the connection is established\r\ndef on_open(ws):\r\n    print(\"Connection established!\")\r\n\r\ndef wsPrint(message):\r\n    print(\"Sending message\")\r\n    ws.send(json.dumps({\r\n        \"deviceName\" : \"Ishaan_PC\",\r\n        \"messageType\" : \"PRINT\",\r\n        \"content\" : message\r\n    }))\r\n\r\ncwd = os.getcwd()\r\n\r\n\r\n# Define the function to be executed when a message is received\r\ndef on_message(ws, message):\r\n    print(\"Received message\")\r\n    print(message)\r\n\r\n    command = json.loads(message)\r\n    #wsPrint(\"Received Command: \" +command)\r\n    \r\n    commandType = command[\"messageType\"]\r\n    content = command[\"content\"]\r\n\r\n    if commandType == \"EXECUTE\":\r\n        #wsPrint(f\"Executing: {content}...\")\r\n        exec(content)\r\n        #wsPrint(\"Finished Executing.\")\r\n\r\n    if commandType == \"DOWNLOAD\":\r\n\r\n        filename = command[\"fileName\"]\r\n\r\n        #wsPrint(f\"Downloading: {filename}...\")\r\n\r\n        file = open(\"DOWNLOADS/\" + filename, \"wb\")\r\n\r\n        data = content.split(\"base64,\")[1]\r\n\r\n        file.write(base64.b64decode(data))\r\n\r\n        file.close()\r\n\r\n        #wsPrint(\"Finished Downloading.\")\r\n\r\n    if commandType == \"DELETE\":\r\n        #wsPrint(\"Deleting\")\r\n        fileToDelete = command[\"content\"]\r\n\r\n        os.remove(\"DOWNLOADS/\"+fileToDelete)\r\n\r\n    if commandType == \"QUERYDOWNLOADS\":\r\n        \r\n        print(os.listdir(\"DOWNLOADS\"))\r\n        fileList = os.listdir(\"DOWNLOADS\")\r\n        ws.send({\r\n            \"deviceName\" : \"Ishaan_PC\",\r\n            \"messageType\" : \"DOWNLOADED_FILES\",\r\n            \"content\": fileList\r\n                 })\r\n        \r\n    if commandType == \"PURGE\":\r\n        #wsPrint(\"Purging DOWNLOADS...\")\r\n        print(\"purging\")\r\n        for file in os.listdir(\"DOWNLOADS\"):\r\n            os.remove(f\"DOWNLOADS/{file}\")\r\n        print(\"removed\")\r\n        #wsPrint(\"Finished Purge.\"}\r\n\r\n# Create a websocket instance and set the event functions\r\nws = websocket.WebSocketApp(url, on_open=on_open, on_message=on_message, header = headers)\r\n\r\n# Start the websocket connection\r\nws.run_forever()","variables":[]}}